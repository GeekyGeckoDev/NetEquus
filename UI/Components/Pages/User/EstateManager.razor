@page "/estatemanager"
@rendermode InteractiveServer
@using Application.EstateApp.EstateDtos
@using Application.EstateApp.IEstateServices.IEstateOrchestrationServices
@inject IEstateOrchestrationService OrchestrationService
@using Application.EstateApp.IEstateAuthService;
@inject IUserContext userContext;
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]

<h3>Estate Details</h3>
<div class="estate-details">
    <p>Some content</p>
</div>



<h3>Estate Details</h3>

@if (estate == null)
{
    <p>Loading estate...</p>
}
else
{
    <div class="estate-details">
        <h2>@estate.EstateName</h2>
        <p><strong>Current Balance:</strong> @estate.CurrentBalance</p>
        <p><strong>Horse Capacity:</strong> @estate.HorseCapacity</p>
    </div>
}

@code {
    private EstateDto? estate;

    protected override async Task OnInitializedAsync()
    {
        // Make sure the UserContext is initialized
        await userContext.InitializeAsync();

        // Grab the estate from the context
        estate = userContext.Estate;

    }
}